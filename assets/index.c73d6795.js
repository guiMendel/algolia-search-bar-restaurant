var U=Object.defineProperty,W=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var x=(e,t,s)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))Q.call(t,s)&&x(e,s,t[s]);if(j)for(var s of j(t))q.call(t,s)&&x(e,s,t[s]);return e},_=(e,t)=>W(e,G(t));import{c as u,a as r,t as d,n as D,o as l,b as Z,d as K,w as R,e as y,f as O,v as I,F as $,r as C,g as T,h as X,m as S,i as w,p as L,j as F,k as v,l as M,q as J,s as E,u as N,L as ee,x as te,y as se,z as Y,A as k,B as H,T as z,C as ae,D as oe}from"./vendor.1f5eb676.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};re();var b=(e,t)=>{const s=e.__vccOpts||e;for(const[i,n]of t)s[i]=n;return s};const ne={name:"CircleButton",props:{icon:String,hoverMessage:String,hoverRight:Boolean}},ie={class:"material-icons-round"};function le(e,t,s,i,n,a){return l(),u("div",null,[r("span",ie,d(s.icon),1),r("p",{class:"hover-message",style:D(s.hoverRight&&"left: 100%")},d(s.hoverMessage),5)])}var B=b(ne,[["render",le],["__scopeId","data-v-1c756268"]]);const ce=Z("889DE6A5ET","530898a80452334fce9256aea43a4778"),ue=["food_type","stars_count","payment_options","price_range","dining_style","neighborhood","city","country"],he=["city","neighborhood","country","food_type"],de=K(ce,"restaurants",{disjunctiveFacets:ue});const pe={name:"ListSelect",emits:["toggle-select","search","close"],props:{name:String,options:Object,search:Function},data(){return{processedOptions:this.options}},methods:{toggleSelected(e){this.$emit("toggle-select",e)},async searchFor(e){this.processedOptions=await this.search(e.target.value)},close(e){(!e||e.key=="Escape")&&(window.removeEventListener("keydown",this.close),this.$emit("close"))}},mounted(){var e,t;(t=(e=this.$refs)==null?void 0:e.filter)==null||t.focus(),window.addEventListener("keydown",this.close)}},ge={class:"list"},me={class:"no-results"},fe=["onClick"],_e={class:"material-icons-round"};function ve(e,t,s,i,n,a){return l(),u("div",{class:"shadow",onClick:t[2]||(t[2]=R(o=>a.close(),["self"]))},[r("div",ge,[r("span",{onClick:t[0]||(t[0]=R(o=>a.close(),["self"])),class:"material-icons-round close"},"close"),r("h1",null,d(s.name),1),s.search?(l(),u("input",{key:0,type:"text",placeholder:"filter",onInput:t[1]||(t[1]=(...o)=>a.searchFor&&a.searchFor(...o)),ref:"filter"},null,544)):y("",!0),r("ul",null,[O(r("p",me," No results for the current filter combination ",512),[[I,n.processedOptions.length==0]]),(l(!0),u($,null,C(n.processedOptions,({name:o,count:c,isRefined:m})=>(l(),u("li",{key:o,class:T({selected:m}),onClick:g=>a.toggleSelected(o)},[r("span",_e,d(m?"check_box":"check_box_outline_blank"),1),X(" "+d(o)+" ",1),r("em",null,"("+d(c)+")",1)],10,fe))),128))])])])}var ye=b(pe,[["render",ve],["__scopeId","data-v-2ecf7f91"]]);const be={name:"DropdownSelect",emits:["toggle-select"],props:{placeholder:String,options:Object,search:Function,isOpen:Boolean,setOpen:Function},components:{ListSelect:ye},computed:_(h({},S(["tutorialOpen"])),{selectedOptions(){return this.options.filter(({isRefined:e})=>e).map(({name:e})=>e)}}),methods:{format(e,t){return e.length==1?this.adjustCase(e[0]):this.adjustCase(t)},adjustCase(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")},toggleSelect(e){this.$emit("toggle-select",e)}}},ke=e=>(L("data-v-5897ef8f"),e=e(),F(),e),Te={class:"container"},we={class:"title"},Se=ke(()=>r("span",{class:"material-icons-round"}," expand_more ",-1));function Me(e,t,s,i,n,a){const o=v("list-select");return l(),u("div",Te,[r("div",{class:T(["dropdown-button",{active:a.selectedOptions.length}]),onClick:t[0]||(t[0]=c=>s.setOpen(!0))},[r("div",we,[r("span",null,d(a.format(a.selectedOptions,s.placeholder)),1),O(r("span",{class:"number-of-facets"},d(a.selectedOptions.length),513),[[I,a.selectedOptions.length>1]])]),Se],2),s.isOpen?(l(),w(o,{key:0,name:a.adjustCase(s.placeholder),options:s.options,search:s.search,onClose:t[1]||(t[1]=c=>s.setOpen(!1)),onToggleSelect:a.toggleSelect},null,8,["name","options","search","onToggleSelect"])):y("",!0)])}var Oe=b(be,[["render",Me],["__scopeId","data-v-5897ef8f"]]);const $e={name:"SearchBar",props:{placeholder:String},data:()=>({helper:de,searchable:he,facets:{},input:"",currentlyOpenFacetMenu:null,refinedFacets:[]}),computed:_(h({},S(["page","coords","results","tutorialOpen"])),{anyRefinements(){var e,t;return((t=(e=this.results)==null?void 0:e.getRefinements())==null?void 0:t.length)>0}}),components:{DropdownSelect:Oe},mounted(){this.helper.on("result",this.onResult),this.helper.on("change",({isPageReset:e})=>e&&this.resetPage()),this.updateGeolocationParameter(),this.helper.search()},methods:_(h({},M(["resetPage","setResults"])),{updateGeolocationParameter(){if(this.coords){const e=`${this.coords.lat}, ${this.coords.lng}`;this.helper.setQueryParameter("aroundLatLng",e).search()}else this.helper.setQueryParameter("aroundLatLng","").search()},refinedFacetsFirst(e){const t={},s={};for(const i in e)e[i].data.find(n=>n.isRefined)?t[i]=e[i]:s[i]=e[i];return Object.assign(t,s)},setOpen(e,t){this.currentlyOpenFacetMenu=t&&!this.tutorialOpen?e:null},onResult(e){this.setResults(e.results),this.updateFacets(e.results)},async searchFacetValues(e,t){const{facetHits:s}=await this.helper.searchForFacetValues(e,t),i=s.map(({value:a,count:o,isRefined:c})=>({name:a,count:o,isRefined:c})),n=this.refinedFacets.filter(({attributeName:a,name:o})=>a===e&&!s.find(({value:c})=>c===o)).map(({name:a,count:o})=>({name:a,count:o,isRefined:!0}));return i.push(...n),i},async updateFacets(e){const t=e.disjunctiveFacets;this.facets={},this.refinedFacets=e.getRefinements();for(const{name:s}of t)this.searchable.includes(s)?this.facets[s]={data:await this.searchFacetValues(s,""),searchable:!0}:this.facets[s]={data:e.getFacetValues(s,{sortBy:["count:desc"]}),searchable:!1}},toggleFacet(e,t){this.helper.toggleFacetRefinement(e,t).search()},clearFacets(){this.helper.clearRefinements().search()}}),watch:{input(e){this.helper.setQuery(e).search()},coords(){this.updateGeolocationParameter()},page(e){this.helper.setPage(e).search()},tutorialOpen(e){e&&(this.currentlyOpenFacetMenu=null)}}},Ie=e=>(L("data-v-5c5634ec"),e=e(),F(),e),Ce={class:"searchbar"},Pe=Ie(()=>r("span",{class:"material-icons-round"},"search",-1)),Re=["placeholder"],Le={class:"facets"},Fe={key:0,class:"no-facets"};function De(e,t,s,i,n,a){const o=v("dropdown-select");return l(),u("main",null,[r("div",Ce,[Pe,O(r("input",{type:"text",autocomplete:"off","onUpdate:modelValue":t[0]||(t[0]=c=>e.input=c),placeholder:s.placeholder},null,8,Re),[[J,e.input]])]),r("div",Le,[Object.keys(e.facets).length==0&&e.input.length>0?(l(),u("p",Fe," No filters available for this search ")):y("",!0),a.anyRefinements?(l(),u("span",{key:1,class:"material-icons-round clear-filters",onClick:t[1]||(t[1]=(...c)=>a.clearFacets&&a.clearFacets(...c))},"clear")):y("",!0),(l(!0),u($,null,C(a.refinedFacetsFirst(e.facets),({data:c,searchable:m},g)=>(l(),w(o,{key:g,placeholder:g,search:m?async f=>a.searchFacetValues(g,f):null,options:c,"is-open":e.currentlyOpenFacetMenu===g,"set-open":f=>a.setOpen(g,f),onToggleSelect:f=>a.toggleFacet(g,f)},null,8,["placeholder","search","options","is-open","set-open","onToggleSelect"]))),128))])])}var Ne=b($e,[["render",De],["__scopeId","data-v-5c5634ec"]]),Be=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],je="/algolia-search-bar-restaurant/assets/pin.8ec9212b.svg",xe="/algolia-search-bar-restaurant/assets/flag.a8a758aa.svg";const A={zoom:15,styles:Be,disableDefaultUI:!0,maxZoom:17,minZoom:13,gestureHandling:"greedy"},Ye={name:"Map",components:{CircleButton:B},data:()=>({loader:null,mapObject:null,apiMaps:null,markers:{},activePinIds:[],mapCentered:!0}),computed:_(h(h({},E(["restaurants"])),S(["coords","highlightedRestaurant","splitScreen"])),{flagIcon(){return{url:xe,scaledSize:new this.apiMaps.Size(50,50),anchor:new this.apiMaps.Point(5,50)}},pinIcon(){return{url:je,scaledSize:new this.apiMaps.Size(50,50),anchor:new this.apiMaps.Point(25,50)}},restaurantLocations(){return this.restaurants?this.restaurants.map(({objectID:e,_geoloc:{lat:t,lng:s}})=>({id:e,location:{lat:t,lng:s}})):[]}}),methods:_(h(h({},N(["selectRestaurant"])),M(["highlightRestaurant","toggleMap"])),{refocusMap(){this.coords&&(this.mapObject.panTo(this.coords),this.mapObject.setZoom(A.zoom),this.mapCentered=!0)},async createMap(){await this.loader.load().then(()=>{this.apiMaps=google.maps,this.mapObject=new this.apiMaps.Map(this.$refs.map,h({center:this.coords},A)),this.mapObject.addListener("center_changed",()=>{this.mapCentered=!1})})},async updateMap(){this.loader&&this.coords&&(this.mapObject?this.refocusMap():await this.createMap(),this.updateMarkers())},updateMarkers(){this.updateLocationMarker();const e=[...this.activePinIds];this.activePinIds=[];for(const t of this.restaurantLocations)this.removeIfPresent(e,t.id),this.activePinIds.push(t.id),this.setMarker(t.id,t.location);for(const t of e)this.removeMarker(t)},setMarker(e,t,s){if(this.markers[e]){this.markers[e].setPosition(t);return}this.markers[e]=new this.apiMaps.Marker({position:t,map:this.mapObject,icon:s!=null?s:this.pinIcon}),this.markers[e].addListener("click",()=>{this.toggleMap(!1),this.selectRestaurant({restaurantId:e,selector:"marker"})}),this.markers[e].addListener("mouseover",()=>this.highlightRestaurant({restaurantId:e}))},removeMarker(e){!this.markers[e]||(this.markers[e].setVisible(!1),this.markers[e].setMap(null),delete this.markers[e])},updateLocationMarker(){if(!this.coords)return this.removeMarker("location");const e=this.getMarkerPosition("location");(!e||e.lat!=this.coords.lat&&e.lng!=this.coords.lng)&&(this.setMarker("location",this.coords,this.flagIcon),this.apiMaps.event.clearInstanceListeners(this.markers.location),this.markers.location.addListener("click",this.refocusMap))},getMarkerPosition(e){var t,s;return{lat:(t=this.markers[e])==null?void 0:t.position.lat(),lng:(s=this.markers[e])==null?void 0:s.position.lng()}},removeIfPresent(e,t){let s;(s=e.findIndex(i=>i==t))!=-1&&e.splice(s,1)},setMarkerHighlight(e,t){!e||!this.markers[e]||(t?this.markers[e].setAnimation(this.apiMaps.Animation.BOUNCE):this.markers[e].setAnimation(null))},focusOnRestaurant(e){!this.mapObject||!this.markers[e]||(this.splitScreen||this.toggleMap(!0),this.mapObject.panTo(this.markers[e].position))}}),mounted(){this.loader=new ee({apiKey:"AIzaSyCQrsvP4wujW7bz-WEDFrcLj4BLA1QpSiU",version:"weekly"}),this.updateMap(),this.$store.commit("subscribeToRestaurantSelection",{observer:"map",onSelect:(e,t)=>t==="index"&&this.focusOnRestaurant(e)})},watch:{coords(){this.updateMap()},restaurants(){this.apiMaps&&this.updateMarkers()},highlightedRestaurant(e,t){this.mapObject&&(this.setMarkerHighlight(e,!0),this.setMarkerHighlight(t,!1))}}},Ae=e=>(L("data-v-0b23ecd2"),e=e(),F(),e),Ee={class:"map-container"},He={class:"map",ref:"map"},ze=Ae(()=>r("p",{class:"no-map"},"Map requires geolocation access",-1)),Ve=[ze];function Ue(e,t,s,i,n,a){const o=v("circle-button");return l(),u("div",Ee,[r("div",He,Ve,512),e.mapObject?(l(),w(o,{key:0,id:"refocus-button",class:T({active:e.mapCentered,disabled:!e.coords}),onClick:a.refocusMap,icon:"my_location",hoverMessage:"Center on me","hover-right":""},null,8,["class","onClick"])):y("",!0)])}var We=b(Ye,[["render",Ue],["__scopeId","data-v-0b23ecd2"]]);const Ge={name:"StarRating",props:{rating:Number,reviews:Number},computed:{stars(){return[...Array(5).keys()].map(e=>this.rating-e)}},methods:{getIconFor(e){return e<=0?"star_border":e>=1?"star":"star_half"}}},Qe={class:"container"},qe={class:"stars"};function Ze(e,t,s,i,n,a){return l(),u("div",Qe,[r("div",qe,[(l(!0),u($,null,C(a.stars,o=>(l(),u("span",{class:"material-icons-round",key:o},d(a.getIconFor(o)),1))),128))]),r("small",null,d(s.reviews)+" reviews",1)])}var Ke=b(Ge,[["render",Ze],["__scopeId","data-v-494c0903"]]);const Xe={name:"PaginationControl",computed:h({},S(["page"])),methods:h({},M(["nextPage","previousPage","setPage"]))},Je={class:"pagination-control"},et=["value"];function tt(e,t,s,i,n,a){return l(),u("div",Je,[r("span",{class:"material-icons-round",onClick:t[0]||(t[0]=(...o)=>e.previousPage&&e.previousPage(...o))},"arrow_back_ios"),r("input",{type:"number",ref:"input",value:e.page?parseInt(e.page)+1:1,onInput:t[1]||(t[1]=({target:{value:o}})=>e.setPage(o-1)),onClick:t[2]||(t[2]=(...o)=>e.$refs.input.select&&e.$refs.input.select(...o))},null,40,et),r("span",{class:"material-icons-round",onClick:t[3]||(t[3]=(...o)=>e.nextPage&&e.nextPage(...o))},"arrow_forward_ios")])}var st=b(Xe,[["render",tt],["__scopeId","data-v-a532b568"]]);const at={name:"RestaurantIndex",components:{StarRating:Ke,PaginationControl:st,Loading:te},data:()=>({restaurantDistances:{},loading:!0}),computed:_(h(h({},S(["page","results","coords","highlightedRestaurant"])),E(["restaurants"])),{numberOfResults(){return this.results?`
          ${this.results.nbHits>999?Math.round(this.results.nbHits/1e3)+"k":this.results.nbHits} ${this.results.nbHits>1?"results":"result"} found in ${this.results.processingTimeMS>99?this.results.processingTimeMS/1e3+" s":this.results.processingTimeMS+" ms"}`:""}}),methods:_(h(h({},N(["selectRestaurant"])),M(["highlightRestaurant"])),{restaurantDistance({_geoloc:e,objectID:t}){if(!this.restaurantDistances[t]){let s=se(Y(this.coords),Y(e));this.restaurantDistances[t]=Math.round(s/100)/10}return this.restaurantDistances[t]},formatDistance(e){return e>1e3?"Over 1000 km":e<.1?"Less than 0.1 km":e<=1?`Only ${e} km`:`${e} km`},scrollTo(e){const t=document.getElementById(`restaurant-${e}`);t&&setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"center"})},100)}}),mounted(){setTimeout(()=>this.loading=!1,2e3),this.$store.commit("subscribeToRestaurantSelection",{onSelect:this.scrollTo,observer:"index"})},watch:{coords(){this.restaurantDistances={}},page(){this.$refs["top-page-control"].$el.scrollIntoView({behavior:"smooth",block:"center"})}}},ot={class:"number-of-results"},rt={key:1,class:"no-match"},nt=["id","onMouseover","onClick"],it=["src","alt"],lt={class:"details"},ct=["innerHTML"],ut={class:"misc"};function ht(e,t,s,i,n,a){var g,f,P;const o=v("loading"),c=v("pagination-control"),m=v("star-rating");return l(),u("main",null,[((g=e.restaurants)==null?void 0:g.length)?y("",!0):(l(),w(o,{key:0,active:e.loading},null,8,["active"])),r("p",ot,d(a.numberOfResults),1),!((f=e.restaurants)==null?void 0:f.length)&&!e.loading?(l(),u("p",rt," Sorry, no matches! ")):y("",!0),k(c,{ref:"top-page-control",id:"top-page-control"},null,512),(l(!0),u($,null,C(e.restaurants,p=>(l(),u("div",{key:p.objectID,class:T(["restaurant",{highlighted:e.highlightedRestaurant===p.objectID}]),id:`restaurant-${p.objectID}`,onMouseover:V=>e.highlightRestaurant({restaurantId:p.objectID}),onClick:V=>e.selectRestaurant({restaurantId:p.objectID,selector:"index"})},[r("img",{src:p.image_url,alt:p.name},null,8,it),r("div",lt,[r("h1",{innerHTML:p._highlightResult.name.value},null,8,ct),k(m,{rating:p.stars_count,reviews:p.reviews_count},null,8,["rating","reviews"]),r("div",ut,[r("span",null,d(p.food_type),1),r("span",null,d(p.area),1),r("span",null,d(p.price_range),1)]),e.coords?(l(),u("small",{key:0,class:T(["distance",{close:a.restaurantDistance(p)<=1}])},d(a.formatDistance(a.restaurantDistance(p)))+" from you",3)):y("",!0)])],42,nt))),128)),((P=e.restaurants)==null?void 0:P.length)?(l(),w(c,{key:2})):y("",!0)])}var dt=b(at,[["render",ht],["__scopeId","data-v-dde43c88"]]);const pt={name:"TutorialDialogueBox",emits:["advance"],props:{active:Boolean,vertical:String,horizontal:String,content:String,show:Array,highlight:Array,advanceOn:Boolean,action:Function,isLast:Boolean},data:()=>({advancing:!1}),components:{CircleButton:B},computed:{advanceButtonAvailable(){return this.advanceOn==null||this.advanceOn&&!this.advancing}},methods:_(h({},M(["toggleTutorial"])),{advance(){this.advancing=!0,this.$emit("advance")},showElements(){if(this.show)for(const e of this.show)document.getElementById(e).classList.add("tutorial-show");if(this.highlight)for(const e of this.highlight){const t=document.getElementById(e);t&&(t.scrollIntoView({block:"center"}),t.classList.add("tutorial-show"),t.classList.add("tutorial-highlight"))}},hideElements(){var e,t;for(const s of[...(e=this.highlight)!=null?e:[],...(t=this.show)!=null?t:[]]){const i=document.getElementById(s);i&&(i.classList.remove("tutorial-highlight"),i.classList.remove("tutorial-show"))}}}),watch:{active(){this.active?(this.action&&this.action(),setTimeout(this.showElements,100)):this.hideElements()},advanceOn(e){e&&this.active&&this.advance()}},beforeUnmount(){this.hideElements()}},gt=["innerHTML"];function mt(e,t,s,i,n,a){return l(),w(z,{name:"fade"},{default:H(()=>[s.active?(l(),u("main",{key:0,class:T([`vertical-${s.vertical}`,`horizontal-${s.horizontal}`]),style:D({paddingBottom:a.advanceButtonAvailable?"3rem":"2rem"})},[r("span",{onClick:t[0]||(t[0]=R(o=>e.toggleTutorial(!1),["self"])),class:"material-icons-round close"},"close"),r("p",{innerHTML:s.content,class:"tutorial-dialogue"},null,8,gt),a.advanceButtonAvailable?(l(),u("span",{key:0,onClick:t[1]||(t[1]=R((...o)=>a.advance&&a.advance(...o),["self"])),class:"material-icons-round next"},d(s.isLast?"done":"navigate_next"),1)):y("",!0)],6)):y("",!0)]),_:1})}var ft=b(pt,[["render",mt],["__scopeId","data-v-718f3304"]]);const _t={name:"Tutorial",components:{TutorialDialogueBox:ft},data(){return{currentTutorialPhase:0,restaurantSelectedDuringPhase:!1}},computed:_(h({},S(["usingNYcoords","coords","mapOpen"])),{tutorialPhases(){return[{content:"Welcome to our <b>Restaurant Locator Demo</b>! This quick guide will walk you through it's main features. You can exit this tour at any time by clicking the X button at the top right of this box"},{highlight:["search-bar"],content:"The search bar offers a <b>search-as-you-type</b> experience, and provides a wide variety of filters to <b>further refine</b> your search"},{show:["results"],action:()=>this.toggleMap(!1),content:"Here you can find all the <b>resulting pages</b> of your search, sorted by distance, star count and review count",position:["top","left"]},{show:["results"],highlight:["top-page-control"],content:"You can <b>cycle through</b> the pages by clicking these arrows, or select the page number and <b>input a specific one</b>",position:["bottom","left"]},{show:["main-buttons","location-message"],highlight:["toggle-NY-coords"],advanceOn:this.usingNYcoords,position:[,"right"],content:"Our service uses data location. In case it's not possible to share your location, you can always <b>simulate the location from New York</b> by clicking this button. Try it now!"},{show:["main-buttons","location-message"],highlight:["toggle-map"],advanceOn:this.mapOpen,content:"By clicking this button, you can expand a <b>map of the local area</b>, if some type of location is provided",position:[,"right"]},{show:["location-message","map","results"],action:this.openMap,content:"On the map, <b>the flag indicates your position</b>, and the pins indicate <b>the location of the restaurants</b> in the current page",position:["top","left"]},{show:["location-message","map","results"],highlight:["refocus-button"],action:this.openMap,content:"Whenever necessary, use this button to <b>recenter the map</b> on you",position:["top","left"]},{show:["location-message","map","main-buttons","results"],action:this.openMap,advanceOn:this.restaurantSelectedDuringPhase,content:"By selecting one of the pins, you will be scrolled to the <b>corresponding restaurant</b>. Give it a try!<br><small>Tip: if you don't see any pins, try turning on the NY location simulator</small>",position:["top","left"]},{show:["location-message","map","results"],action:()=>this.toggleMap(!1),advanceOn:this.restaurantSelectedDuringPhase,content:"You can also select a restaurant on the list to be scrolled to it's <b>position on the map</b>! Try it out!",position:["top","left"]},{show:["location-message","map","results"],content:"And voil\xE0, that's it!<br>Try searching for restaurants of your favorite cuisine!",position:["top","right"]}]}}),methods:_(h({},M(["toggleTutorial","toggleMap","useNYcoords"])),{openMap(){this.coords||this.useNYcoords(),this.toggleMap(!0)}}),watch:{currentTutorialPhase(e){this.restaurantSelectedDuringPhase=!1,e>=this.tutorialPhases.length&&this.toggleTutorial(!1)}},mounted(){this.$store.commit("subscribeToRestaurantSelection",{observer:"tutorial",onSelect:()=>this.restaurantSelectedDuringPhase=!0})},beforeUnmount(){this.$store.commit("unsubscribeToRestaurantSelection","tutorial")}},vt=e=>(L("data-v-e64729e2"),e=e(),F(),e),yt=vt(()=>r("div",{class:"shadow"},null,-1)),bt={class:"tutorial-container"};function kt(e,t,s,i,n,a){const o=v("tutorial-dialogue-box");return l(),u($,null,[yt,r("div",bt,[(l(!0),u($,null,C(a.tutorialPhases,(c,m)=>(l(),w(o,{key:m,onAdvance:t[0]||(t[0]=g=>n.currentTutorialPhase++),active:n.currentTutorialPhase==m,vertical:c.position?c.position[0]:"center",horizontal:c.position?c.position[1]:"center",show:c.show,highlight:c.highlight,content:c.content,advanceOn:c.advanceOn,action:c.action,"is-last":m==a.tutorialPhases.length-1},null,8,["active","vertical","horizontal","show","highlight","content","advanceOn","action","is-last"]))),128))])],64)}var Tt=b(_t,[["render",kt],["__scopeId","data-v-e64729e2"]]);const wt={name:"App",components:{RestaurantIndex:dt,Tutorial:Tt,SearchBar:Ne,CircleButton:B,Map:We},computed:_(h({},S(["coords","usingNYcoords","mapOpen","tutorialOpen","splitScreen"])),{resultsStyle(){return{display:this.splitScreen&&this.mapOpen?"none":"initial"}},locationIcon(){return this.usingNYcoords?"location_off":this.coords?"location_on":"fmd_bad"},mapIcon(){return this.splitScreen?this.mapOpen?"close_fullscreen":"open_in_full":"map"},mapHoverMessage(){return this.splitScreen?this.mapOpen?"Condense map":"Expand map":"Show map"},locationHoverMessage(){return this.usingNYcoords?"Simulating location from New York":this.coords?"Using real geolocation":"No location access"},locationMessage(){return this.usingNYcoords?"Simulating location from New York":this.coords?"":"Failed to retrieve current location"}}),methods:h(h({},M(["setCoords","toggleMap","toggleTutorial","setSplitScreen"])),N(["updateCoords","toggleNYcoords"])),created(){this.updateCoords(),this.setSplitScreen(),window.addEventListener("resize",()=>this.setSplitScreen()),localStorage.getItem("not-the-first-rodeo")||this.toggleTutorial(!0)}},St={class:"container"},Mt={id:"main-buttons"};function Ot(e,t,s,i,n,a){const o=v("tutorial"),c=v("search-bar"),m=v("restaurant-index"),g=v("Map"),f=v("circle-button");return l(),u("div",St,[e.tutorialOpen?(l(),w(o,{key:0})):y("",!0),k(c,{id:"search-bar",placeholder:"search by name, cuisine or location"}),r("div",{id:"results",style:D(a.resultsStyle)},[k(m)],4),k(z,{name:"slide"},{default:H(()=>[O(k(g,{id:"map"},null,512),[[I,e.mapOpen||e.splitScreen]])]),_:1}),r("div",Mt,[k(f,{id:"toggle-NY-coords",class:T({active:!e.usingNYcoords&&e.coords}),onClick:e.toggleNYcoords,icon:a.locationIcon,hoverMessage:a.locationHoverMessage},null,8,["class","onClick","icon","hoverMessage"]),k(f,{id:"toggle-map",class:T({active:e.mapOpen&&!e.splitScreen,disabled:!e.mapOpen&&!e.coords}),onClick:t[0]||(t[0]=P=>e.toggleMap(!e.mapOpen)),icon:a.mapIcon,hoverMessage:a.mapHoverMessage},null,8,["class","icon","hoverMessage"]),O(k(f,{class:"toggle-tutorial",onClick:t[1]||(t[1]=P=>e.toggleTutorial(!0)),icon:"help_outline",hoverMessage:"Demo tour"},null,512),[[I,!e.tutorialOpen&&!e.mapOpen]])]),O(r("p",{id:"location-message"},d(a.locationMessage),513),[[I,a.locationMessage]])])}var $t=b(wt,[["render",Ot],["__scopeId","data-v-073fb068"]]);const It=ae({state(){return{results:null,page:0,coords:null,usingNYcoords:!1,mapOpen:!1,tutorialOpen:!1,splitScreen:window.innerWidth>=1024,restaurantSelectionObservers:{},highlightedRestaurant:null,highlightTimeout:null,highlightLocked:!1}},getters:{restaurants(e){var t;return(t=e.results)==null?void 0:t.hits}},actions:{toggleNYcoords({state:e,commit:t,dispatch:s}){e.usingNYcoords?s("updateCoords"):t("useNYcoords")},updateCoords({state:e,commit:t}){navigator==null||navigator.geolocation.getCurrentPosition(({coords:{latitude:s,longitude:i}})=>t("setCoords",{lat:s,lng:i}),()=>t("unsetCoords")),e.usingNYcoords=!1},selectRestaurant({state:e,commit:t},{restaurantId:s,selector:i="anonymous"}){for(const n of Object.values(e.restaurantSelectionObservers))n(s,i);t("highlightRestaurant",{restaurantId:s,duration:4e3,lock:!0})}},mutations:{setPage:(e,t)=>t>=0&&(e.page=t),resetPage:e=>e.page=0,nextPage:e=>e.page++,previousPage:e=>e.page>0&&e.page--,setResults:(e,t)=>e.results=t,setCoords:(e,t)=>e.coords=t,unsetCoords:e=>e.coords=null,useNYcoords(e){e.coords={lat:40.71,lng:-74.012},e.usingNYcoords=!0},subscribeToRestaurantSelection(e,{onSelect:t,observer:s}){e.restaurantSelectionObservers[s]=t},unsubscribeToRestaurantSelection(e,t){delete e.restaurantSelectionObservers[t]},toggleMap(e,t){e.mapOpen=e.coords!=null&&t},toggleTutorial(e,t){e.tutorialOpen=t,t||localStorage.setItem("not-the-first-rodeo",!0)},setSplitScreen(e){e.splitScreen=window.innerWidth>=1024},highlightRestaurant(e,{restaurantId:t,duration:s=1e3,lock:i}){e.highlightLocked&&!i||(e.highlightedRestaurant=t,i&&(e.highlightLocked=!0),e.highlightTimeout&&clearInterval(e.highlightTimeout),e.highlightTimeout=setTimeout(()=>{e.highlightTimeout=null,e.highlightedRestaurant=null,e.highlightLocked=!1},s))}}});oe($t).use(It).mount("#app");
